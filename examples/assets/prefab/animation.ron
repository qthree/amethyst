#![enable(implicit_some)]
Prefab (
    entities: [
        (
            data: (
                (
                    transform: (),
                    light: (
                        ambient_color: ({
                           red: 0.05,
                           green: 0.05,
                           blue: 0.05,
                           alpha: 1.0,
                        }),
                    )
                ),
                (
                    animations: [
                        // each animation is defined by an id, and a set of samplers
                        (Translate, (
                            // each sampler consist of:
                            //   * target entity (which is an index in this prefab),
                            //   * animation channel, here the attribute on Transform
                            //   * interpolation data and function
                            samplers: [(0, Translation, (
                                input: [0., 1., 2., 3., 4.],
                                output: [
                                    Vec3((0., 0., 0.)),
                                    Vec3((1., 0., 0.)),
                                    Vec3((0., 0., 0.)),
                                    Vec3((-1., 0., 0.)),
                                    Vec3((0., 0., 0.)),
                                ],
                                function: Linear,
                            ))]
                        )),
                        (Scale, (
                            samplers: [(0, Scale, (
                                input: [0., 1., 2., 3., 4.],
                                output: [
                                    Vec3((1., 1., 1.)),
                                    Vec3((0.6, 0.6, 0.6)),
                                    Vec3((0.3, 0.3, 0.3)),
                                    Vec3((0.6, 0.6, 0.6)),
                                    Vec3((1., 1., 1.)),
                                ],
                                function: Linear,
                            ))]
                        )),
                        (Rotate, (
                            samplers: [(0, Rotation, (
                                input: [0., 1., 2., 3., 4.],
                                output: [
                                    Vec4((1., 0., 0., 0.)),
                                    Vec4((0.70710678, 0., 0., 0.70710678)),
                                    Vec4((0., 0., 0., 1.)),
                                    Vec4((-0.70710678, 0., 0., 0.70710678)),
                                    Vec4((-1., 0., 0., 0.)),
                                ],
                                function: SphericalLinear,
                            ))]
                        )),
                    ],
                )
            ),
        ),
        (
            parent: 0,
            data: (
                (
                    graphics: (
                        mesh: Shape(( shape: Sphere(32, 32), )),
                        material: (
//                          albedo: Data(Rgba((0.0, 0.0, 1.0, 1.0,), (channel: Srgb),)),
                            albedo: Data((
                                    kind: D2(2, 2, 1, 1),
                                    view_kind: D2,
                                    format: Rgba8Srgb,
                                    data: [
                                        0, 0, 255, 255,
                                        255, 0, 0, 255,
                                        0, 255, 0, 255,
                                        255, 255, 0, 255,
                                    ],
                                    data_width: 2,
                                    data_height: 2,
                                    filter: Nearest,
                                    swizzle: (R, G, B, A),
                                )),
                      ),
                    ),
                    transform: (
                        translation: (0.0, 1.0, 0.0),
                    ),
                ),
                None
            ),
        ),
        (
            data: (
                (
                    transform: (
                        translation: (2.0, 2.0, -2.0),
                    ),
                    light: (
                        light: Point((
                            intensity: 3.0,
                            color: (
                                red: 1.0,
                                green: 1.0,
                                blue: 1.0,
                            ),
                            radius: 5.0,
                        )),
                    ),
                ),
                None
            ),
        ),
        (
            data: (
                (
                    transform: Transform (
                        translation: (0.0, 0.0, -4.0),
                        rotation: (0.0, 0.0, 1.0, 0.0),
                        scale: (1.0, -1.0, 1.0),
                    ),
                    camera: Perspective((
                        aspect: 1.3,
                        fovy: 1.0471975512,
                        znear: 0.1,
                        zfar: 2000.0,
                    )),
                ),
                None
            ),
        ),
    ],
)
